pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	t=0
	state="game"
	tsize=16
	
	px=16
	py=16*4
	pflip=false
	psteps=0
	pdir=-1
	idle="idle_f"
	pstate=idle
	lidle={"idle_s", "idle_s","idle_u","idle_d"}
	anit={1,3,1}
	pp=1
	
	pbtn=0
	debug=""
end


function _update60()
	update()
end


function _draw()
	draw()
end
-->8
--update

function update()
	if state=="game" then
		t+=1
		pmove()
	end
end
-->8
--draw

function draw()
	if state=="game" then
		cls(0)
		map()
		ani()
		print(debug,10,10,0)
	end
end
-->8
--player

function pmove()
	if psteps==0 then
		--0 1 2 3
		--⬅️➡️⬆️⬇️
		for b=0, 3 do
			if btn(b) then
				pdir=b
				psteps=16
				idle=lidle[b+1]
			else
				pstate=idle
			end
	 end
	end
 
 walk()
end

function walk()
	if psteps>0 and t%1==0 then
		if pdir==⬅️ then
			pflip=true
			px-=1
			pstate="walk_s"
		elseif pdir==➡️ then
			pflip=false
			px+=1
			pstate="walk_s"
		elseif pdir==⬆️ then
			py-=1
			pstate="walk_u"
		elseif pdir==⬇️ then
			py+=1
			pstate="walk_d"
		end
		
		psteps-=1
	end	
end


function ani()
	if pstate=="idle_d" then
		anit={1,3,1}
	elseif pstate=="idle_u" then
		anit={9,11,9}
	elseif pstate=="idle_s" then
		anit={34,36,34}
	elseif pstate=="walk_d" then
		anit={5,7,5}
	elseif pstate=="walk_u" then
		anit={13,32,13}
	elseif pstate=="walk_s" then
		anit={38,40,38}
	end
	
	spr(anit[pp],px,py,2,2,pflip)
		
	if t%20==0 then
		pp+=1
	end
		
	if pp>=#anit then
		pp=1
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000050000000500000000000000000000000000000000000000000000
00700700000000050000000000000000000000000000000050000000000000500000000000575000005750000005000000050000000500000005000000000000
00077000000500575005000000000005000000000005000575050000000505750005000000577555557750000057500000575000005750000057500000000000
00077000005750575057500000050057500500000057505775575000005755775057500000577777777750000057755555775000005775555577500000000000
00700700005775555577500000575057505750000057755555775000005775555577500055777775577775500057777777775000005777777777500000000000
00000000005777777fff50000057755555775000005777777fff5000005777777fff500005777757577775005577777557777550557777557777755000000000
0000000055777777fffff550005777777fff500055777777fffff55055777777fffff550557ff757577775500577775757777500057777575777750000000000
0000000005775777ff5ff50055777777fffff55005775777ff5ff50005775777ff5ff50005ffff5757777500557ff75757777550557ff7575777755000000000
00000000557777777ffff55005775777ff5ff500557777777ffff550557777777ffff550005fff575777500005ffff575777750005ffff575777750000000000
000000000577777577fff500557777777ffff5500577777577fff5000577777577fff5000005ff7777750000005fff5757775000005fff575777500000000000
0000000000577777777750000577777577fff500005777777777500000577777777750000005f777777500000005ff77777500000005ff777775000000000000
00000000000555555555000000577777777750000005555555550000000555555555000000057775777500000005f775777500000005f7757775000000000000
00000000000057757750000000055555555500000000577577500000000057757750000000057775777500000005777577750000000577755750000000000000
00000000000057505750000000005750575000000000055057500000000057505500000000005750575000000000575057500000000057505500000000000000
00000000000005505500000000000550550000000000000055000000000005500000000000000550550000000000055055000000000005500000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00050000000500000000500000005000000000000000000000005000000050000000500000005000000000000000000000000000000000000000000000000000
00575000005750000005750000057500000050000000500000057500000575000005750000057500000000000000000000000000000000000000000000000000
00577555557750000005775555557500000575000005750000057755555575000005775555557500000000000000000000000000000000000000000000000000
005777777777500055057777777ff500000577555555750055057777777ff50005557777777ff500000000000000000000000000000000000000000000000000
55777775577775505755777777ffff5055057777777ff5005755777777ffff505755777777ffff50000000000000000000000000000000000000000000000000
05777757577775005757777577ff5f505755777777ffff505757777577ff5f505757777577ff5f50000000000000000000000000000000000000000000000000
557ff7575777755057557777777fff505757777577ff5f5057557777777fff5057557777777fff50000000000000000000000000000000000000000000000000
05ffff5757777500575777777757ff5057557777777fff50575777777757ff50575777777757ff50000000000000000000000000000000000000000000000000
005fff57577750005775777777777500575777777757ff5057757777777775005775777777777500000000000000000000000000000000000000000000000000
0005ff77777500005777555555555000577577777777750057775555555550005777555555555000000000000000000000000000000000000000000000000000
0005f775777500000577777777750000057755555555500005777777775000000577777775500000000000000000000000000000000000000000000000000000
00005755777500000577777775750000057777777775000005777777757500005777777777500000000000000000000000000000000000000000000000000000
00000550575000000057755775750000005775577575000000577557755500005775555777750000000000000000000000000000000000000000000000000000
00000000550000000055500555500000005550055550000000055005500000000550000555550000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000007777777777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000070777777777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077077777777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077700000000000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077705555555555077705000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077705555555555077705000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077705555555555077705000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077705555555555077705000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077705555555555077705000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077701111111111077701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077701d11d11111077701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077701111111111077701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000777011d1111111077701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077701111111111077701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000004142424242434242420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000005152525252535252520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
